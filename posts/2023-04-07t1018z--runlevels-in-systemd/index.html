<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Runlevels in Systemd | My Digital Chronicle</title>
<meta name="keywords" content="systemd, runlevel">
<meta name="description" content="Once, when loading into Asahi, the keyboard stopped working after loading the X server. It was necessary to boot into a bare terminal without starting the X server, but how to do it?
One of the rough options is to boot into bash as an init process. The second option is to redefine the runlevel to the one in which X does not run.
To do this, when loading grub, go to the edit start line menu by pressing the &ldquo;e&rdquo; key.">
<meta name="author" content="">
<link rel="canonical" href="http://undying.github.io/posts/2023-04-07t1018z--runlevels-in-systemd/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.3613efbd0b1772781e8f49935e973cae632a7f61471c05b17be155505ccf87b5.css" integrity="sha256-NhPvvQsXcngej0mTXpc8rmMqf2FHHAWxe&#43;FVUFzPh7U=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="http://undying.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://undying.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://undying.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://undying.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="http://undying.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Runlevels in Systemd" />
<meta property="og:description" content="Once, when loading into Asahi, the keyboard stopped working after loading the X server. It was necessary to boot into a bare terminal without starting the X server, but how to do it?
One of the rough options is to boot into bash as an init process. The second option is to redefine the runlevel to the one in which X does not run.
To do this, when loading grub, go to the edit start line menu by pressing the &ldquo;e&rdquo; key." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://undying.github.io/posts/2023-04-07t1018z--runlevels-in-systemd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-07T10:18:38+03:00" />
<meta property="article:modified_time" content="2023-04-07T10:18:38+03:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Runlevels in Systemd"/>
<meta name="twitter:description" content="Once, when loading into Asahi, the keyboard stopped working after loading the X server. It was necessary to boot into a bare terminal without starting the X server, but how to do it?
One of the rough options is to boot into bash as an init process. The second option is to redefine the runlevel to the one in which X does not run.
To do this, when loading grub, go to the edit start line menu by pressing the &ldquo;e&rdquo; key."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "http://undying.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Runlevels in Systemd",
      "item": "http://undying.github.io/posts/2023-04-07t1018z--runlevels-in-systemd/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Runlevels in Systemd",
  "name": "Runlevels in Systemd",
  "description": "Once, when loading into Asahi, the keyboard stopped working after loading the X server. It was necessary to boot into a bare terminal without starting the X server, but how to do it?\nOne of the rough options is to boot into bash as an init process. The second option is to redefine the runlevel to the one in which X does not run.\nTo do this, when loading grub, go to the edit start line menu by pressing the \u0026ldquo;e\u0026rdquo; key.",
  "keywords": [
    "systemd", "runlevel"
  ],
  "articleBody": "Once, when loading into Asahi, the keyboard stopped working after loading the X server. It was necessary to boot into a bare terminal without starting the X server, but how to do it?\nOne of the rough options is to boot into bash as an init process. The second option is to redefine the runlevel to the one in which X does not run.\nTo do this, when loading grub, go to the edit start line menu by pressing the “e” key. Then we add a new runlevel (init) to the kernel parameters.\nsystemd.unit=multi-user.target For example, if our upload command looks like this:\nlinux vmlinuz-linux-asahi-edge root=/dev/mapper/vg0-root rw cryptdevice=/dev/sda1:cryptroot resume=/dev/sda2 loglevel=3 quiet Then we change it as follows by adding the unit parameter to the end of the line:\nlinux vmlinuz-linux-asahi-edge root=/dev/mapper/vg0-root rw cryptdevice=/dev/sda1:cryptroot resume=/dev/sda2 loglevel=3 quiet systemd.unit=multi-user.target Exit the editing mode and load into the system pressing Ctrl+X\nReferences Kernel Parameters Systemd Targets Runlevels in Systemd ",
  "wordCount" : "156",
  "inLanguage": "en",
  "datePublished": "2023-04-07T10:18:38+03:00",
  "dateModified": "2023-04-07T10:18:38+03:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://undying.github.io/posts/2023-04-07t1018z--runlevels-in-systemd/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "My Digital Chronicle",
    "logo": {
      "@type": "ImageObject",
      "url": "http://undying.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://undying.github.io" accesskey="h" title="My Digital Chronicle (Alt + H)">My Digital Chronicle</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://undying.github.io/about/" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Runlevels in Systemd
    </h1>
    <div class="post-meta"><span title='2023-04-07 10:18:38 +0300 MSK'>April 7, 2023</span>

</div>
  </header> 
  <div class="post-content"><p>Once, when loading into <a href="/posts/2023-04-03t0000z--moving-from-macos-to-asahi-linux/">Asahi</a>, the keyboard stopped working after loading the X server.
It was necessary to boot into a bare terminal without starting the X server, but how to do it?</p>
<p>One of the rough options is to boot into bash as an init process.
The second option is to redefine the runlevel to the one in which X does not run.</p>
<p>To do this, when loading grub, go to the edit start line menu by pressing the <strong>&ldquo;e&rdquo;</strong> key.
Then we add a new runlevel (init) to the kernel parameters.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>systemd.unit<span style="color:#f92672">=</span>multi-user.target
</span></span></code></pre></div><p>For example, if our upload command looks like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>linux vmlinuz-linux-asahi-edge root<span style="color:#f92672">=</span>/dev/mapper/vg0-root rw cryptdevice<span style="color:#f92672">=</span>/dev/sda1:cryptroot resume<span style="color:#f92672">=</span>/dev/sda2 loglevel<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span> quiet
</span></span></code></pre></div><p>Then we change it as follows by adding the unit parameter to the end of the line:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>linux vmlinuz-linux-asahi-edge root<span style="color:#f92672">=</span>/dev/mapper/vg0-root rw cryptdevice<span style="color:#f92672">=</span>/dev/sda1:cryptroot resume<span style="color:#f92672">=</span>/dev/sda2 loglevel<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span> quiet systemd.unit<span style="color:#f92672">=</span>multi-user.target
</span></span></code></pre></div><p>Exit the editing mode and load into the system pressing <code>Ctrl+X</code></p>
<h3 id="references">References<a hidden class="anchor" aria-hidden="true" href="#references">#</a></h3>
<ul>
<li><a href="https://wiki.archlinux.org/title/kernel_parameters">Kernel Parameters</a></li>
<li><a href="https://wiki.archlinux.org/title/Systemd#Targets">Systemd Targets</a></li>
<li><a href="https://www.freedesktop.org/software/systemd/man/runlevel.html">Runlevels in Systemd</a></li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://undying.github.io/tags/systemd/">systemd</a></li>
      <li><a href="http://undying.github.io/tags/runlevel/">runlevel</a></li>
    </ul>
  </footer>
</article>
    </main>
    

<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EM4NECWNX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-6EM4NECWNX');
</script>

</body>

</html>
